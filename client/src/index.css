@tailwind base;
@tailwind components;
@tailwind utilities;

/* Estilos de impresión para los horarios de empleados */
@media print {
  body * {
    visibility: hidden;
  }
  
  .print-employee-schedule,
  .print-employee-schedule * {
    visibility: visible;
  }
  
  .print-employee-schedule {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    background: white;
    padding: 1rem;
  }
  
  /* Ocultar botones y elementos innecesarios al imprimir */
  button, 
  .max-h-\[60vh\],
  .overflow-y-auto {
    max-height: none !important;
    overflow: visible !important;
  }
  
  /* Asegurar que cada tarjeta de empleado tenga espacio suficiente */
  .print-employee-schedule .grid > div {
    page-break-inside: avoid;
    break-inside: avoid;
    margin-bottom: 0.5cm;
  }
}

@layer base {
  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

/* Estilos globales para evitar la selección de texto al arrastrar */
.select-none * {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Estilos para celdas de tiempo */
.time-cell {
  box-sizing: border-box;
  width: 20px !important;
  height: 20px !important;
  min-height: 20px !important;
  max-height: 20px !important;
  padding: 0 !important;
  margin: 0 !important;
  line-height: 20px !important;
}

/* Para controlar la altura de las filas - será controlado por JavaScript */
table tr {
  height: var(--cell-size) !important;
  line-height: var(--cell-size) !important;
}

/* Para controlar el tamaño del contenido */
table td, table th {
  vertical-align: middle;
  overflow: hidden;
}

/* Estilo para la cabecera con horas agrupadas */
thead tr:first-child th[colspan="4"] {
  border-bottom: 1px solid #E0E0E0;
}

/* Asegurarnos que el posicionamiento sticky funcione para las tres filas del encabezado */
thead tr:nth-child(2) th {
  top: var(--cell-size) !important;
}

thead tr:nth-child(3) th {
  top: calc(var(--cell-size) * 2) !important;
}

/* Estilo para la fila de totales (ahora al final) */
.totals-row {
  border-top: 2px solid #D1D5DB; /* Línea más gruesa para separar */
  background-color: #F3F4F6; /* Fondo gris muy claro */
}

.totals-row td {
  font-weight: bold;
}

/* Estilos para la tabla y sus elementos */
.schedule-container {
  position: relative;
  width: 100%;
  max-width: 100vw;
  overflow: hidden;
}

/* Contenedor desplazable con scroll nativo */
.table-container {
  overflow-x: auto;
  overflow-y: auto;
  width: 100%;
  max-width: 100vw;
  -webkit-overflow-scrolling: touch;
  touch-action: auto; /* Permitir todos los gestos táctiles nativos */
}

/* Reset para todas las celdas de tiempo */
.time-cell {
  user-select: none !important;
  -webkit-user-select: none !important;
  -webkit-tap-highlight-color: transparent !important;
  touch-action: manipulation !important; /* Permitir gestos básicos */
}

/* Clase para marcar cuando está ocurriendo una selección */
.is-selecting {
  touch-action: none !important; /* Bloquear scroll durante selección */
}

/* Clase para indicar que se está arrastrando */
.is-dragging .time-cell {
  touch-action: none !important; /* Bloquear scroll en celdas durante arrastre */
}

/* Mensaje informativo para dispositivos táctiles */
.touch-info {
  display: block;
  background-color: #e7f3ff;
  border: 1px solid #b3d7ff;
  color: #0056b3;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
}

/* Estilo para celdas seleccionadas */
.time-cell.selected {
  background-color: rgba(76, 175, 80, 0.4) !important;
  border-color: #4CAF50 !important;
}

/* Estilo para celdas asignadas */
.time-cell.assigned {
  background-color: rgba(25, 118, 210, 0.2) !important;
  border-color: #1976D2 !important;
}